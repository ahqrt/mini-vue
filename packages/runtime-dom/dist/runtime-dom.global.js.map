{
  "version": 3,
  "sources": ["../src/index.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/renderer.ts", "../../runtime-core/src/h.ts", "../src/nodeOps.ts", "../src/modules/attr.ts", "../src/modules/class.ts", "../src/modules/event.ts", "../src/modules/style.ts", "../src/patchProp.ts"],
  "sourcesContent": ["import { createRenderer } from '@vue/runtime-core'\nimport { nodeOps } from './nodeOps'\nimport { patchProp } from './patchProp'\n\nconst renderOptions = Object.assign(nodeOps, { patchProp })\n\nexport function render(vNode, container) {\n  const renderer = createRenderer(renderOptions)\n  renderer.render(vNode, container)\n}\n\nexport * from '@vue/runtime-core'", "export const isObject = (value) => {\n  return value !== null && typeof value === 'object';\n}\n\nexport const isFunction = (value) => {\n  return typeof value === 'function';\n}\n\nexport const isString = (value) => {\n  return typeof value === 'string';\n}\n\nexport const isNumber = (value) => {\n  return typeof value === 'number';\n}\n\nexport const isArray = Array.isArray\n\nexport const assign = Object.assign\n\nexport const enum ShapeFlags {\n  ELEMENT = 1,\n  FUNCTIONAL_COMPONENT = 1 << 1,\n  STATEFUL_COMPONENT = 1 << 2,\n  TEXT_CHILDREN = 1 << 3,\n  ARRAY_CHILDREN = 1 << 4,\n  SLOTS_CHILDREN = 1 << 5,\n  TELEPORT = 1 << 6,\n  SUSPENSE = 1 << 7,\n  COMPONENT_SHOULD_KEEP_ALIVE = 1 << 8,\n  COMPONENT_KEPT_ALIVE = 1 << 9,\n  COMPONENT = ShapeFlags.STATEFUL_COMPONENT | ShapeFlags.FUNCTIONAL_COMPONENT\n}", "import { isArray, isString, ShapeFlags } from \"@vue/shared\";\n\nexport const Text = Symbol(\"TEXT\");\n\nexport function isVNode(value) {\n  return !!(value && value.__v_isVNode)\n}\n\n/**\n * \n * @param type \n * @param props \n * @param children \n */\nexport function createVNode(type, props, children = null) {\n  // \u7EC4\u5408\u65B9\u6848 shapeFlag\n  const shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0\n  /**\n   * \u865A\u62DFdom\n   * \u4E3A\u4E86\u8DE8\u5E73\u53F0\u548Cdiff\u7B97\u6CD5\n   */\n  const vNode = {\n    __v_isVNode: true,\n    shapeFlag,\n    type,\n    props,\n    children,\n    key: props?.['key'],\n    // \u865A\u62DF\u8282\u70B9\u4E0A\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\uFF0C \u540E\u7EEDdiff\u7B97\u6CD5\u4F7F\u7528\n    el: null\n  }\n\n  if (children) {\n    let type = 0\n    if (isArray(children)) {\n      type = ShapeFlags.ARRAY_CHILDREN\n    } else {\n      children = String(children)\n      type = ShapeFlags.TEXT_CHILDREN\n    }\n    vNode.shapeFlag |= type\n  }\n  return vNode\n}", "import { isString, ShapeFlags } from \"@vue/shared\"\nimport { createVNode, Text } from \"./vnode\"\n\nexport function createRenderer(renderOptions) {\n\n  let { insert: hostInsert,\n    remove: hostRemove,\n    setElementText: hostSetElementText,\n    setText: hostSetText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    patchProp: hostPatchProp,\n  } = renderOptions\n\n  const normalize = (vNode) => {\n    if (isString(vNode)) {\n      return createVNode(Text, null, vNode)\n    }\n    return vNode\n  }\n  const mountChildren = (children, container) => {\n    for (let i = 0; i < children.length; i++) {\n\n      let child = normalize(children[i])\n\n      patch(null, child, container)\n    }\n  }\n\n  const mountElement = (vnode, container) => {\n    const { type, props, children, shapeFlag } = vnode\n    // \u5C06\u771F\u5B9E\u5143\u7D20\u6302\u5728\u5E26\u8FD9\u4E2A\u865A\u62DF\u8282\u70B9\u4E0A\uFF0C\u540E\u7EED\u7528\u4E8E\u590D\u7528\u8282\u70B9\n    let el = vnode.el = hostCreateElement(type)\n    if (props) {\n      for (let key in props) {\n        hostPatchProp(el, key, null, props[key])\n      }\n    }\n\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      hostSetElementText(el, children)\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      mountChildren(children, el)\n    }\n\n\n    // \u5C06\u865A\u62DFdom\u6302\u5728\u771F\u5B9Edom\u4E0A\n    hostInsert(el, container)\n  }\n\n  const processText = (n1, n2, container) => {\n    if (n1 === null) {\n      hostInsert((n2.el = hostCreateText(n2.children)), container)\n    }\n  }\n\n  // \u6838\u5FC3\u7684path\u903B\u8F91\n  const patch = (oldVNode, newVNode, container) => {\n    if (oldVNode === newVNode) return\n\n    const { type, shapeFlag } = newVNode\n\n    if (oldVNode === null) {\n\n      // \u521D\u6B21\u6E32\u67D3\n      // \u540E\u7EED\u8FD8\u6709\u7EC4\u5EFA\u7684\u521D\u6B21\u6E32\u67D3\uFF0C\u5F53\u524D\u662F\u5143\u7D20\u7684\u521D\u59CB\u5316\u6E32\u67D3\n      switch (type) {\n        case Text:\n          processText(oldVNode, newVNode, container)\n          break\n\n        default:\n          if (shapeFlag & ShapeFlags.ELEMENT) {\n            mountElement(newVNode, container)\n          }\n      }\n\n    } else {\n      // \u66F4\u65B0\u6D41\u7A0B\n    }\n  }\n\n  const unmount = (vnode) => {\n    hostRemove(vnode.el)\n  }\n\n  const render = (vNode, container) => {\n    console.log('vNode', vNode, 'container', container)\n\n    // \u5982\u679C\u5F53\u524DvNode\u662F\u7A7A\u7684\u8BDD\uFF0C\u8BF4\u660E\u6CA1\u6709\u9700\u8981\u6E32\u67D3\u7684\u5185\u5BB9, \u8D70\u4E00\u4E2A\u5378\u8F7D\u903B\u8F91\n    if (vNode === null) {\n      if (container._vnode) {\n        unmount(container._vnode)\n      }\n    } else {\n      // \u8FD9\u91CC\u65E2\u6709\u521D\u59CB\u5316\u7684\u903B\u8F91\uFF0C\u4E5F\u6709\u66F4\u65B0\u7684\u903B\u8F91\n      patch(container._vnode || null, vNode, container)\n    }\n    container._vnode = vNode\n  }\n\n  return {\n    render\n  }\n}", "import { isObject } from '@vue/shared';\nimport { isArray } from '@vue/shared';\nimport { createVNode, isVNode } from \"./vnode\"\n\nexport function h(type, props, children = null) {\n  const l = arguments.length\n\n  if (l === 2) {\n\n    if (isObject(props) && !isArray(props)) {\n      if (isVNode(props)) { // \u865A\u62DF\u8282\u70B9\n        return createVNode(type, null, [props])\n      }\n      // \u5C5E\u6027\n      return createVNode(type, props)\n    } else {\n      // \u5B50\u8282\u70B9\u6570\u7EC4\u6216\u8005\u6587\u672C\n      return createVNode(type, null, props)\n    }\n\n  } else {\n    if (l > 3) {\n      children = Array.from(arguments).slice(2)\n    } else if (l === 3 && isVNode(children)) {\n      children = [children]\n    }\n\n    return createVNode(type, props, children)\n  }\n}", "export const nodeOps = {\n  /**\n   * \n   * @param child \u63D2\u5165\u7684\u5143\u7D20\n   * @param parent \u63D2\u5165\u5230\u8C01\u91CC\u9762\n   * @param anchor \u53C2\u8003\u7684\u4F4D\u7F6E\uFF0C\u63D2\u5165\u5230\u8C01\u524D\u9762\u53BB\n   */\n  insert(child, parent, anchor = null) {\n    if (anchor) {\n      parent.insertBefore(child, anchor)\n    } else {\n      parent.appendChild(child)\n    }\n  },\n\n  /**\n   * \u5220\u9664\u8282\u70B9\n   * @param child \n   */\n  remove(child) {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child)\n    }\n  },\n\n  /**\n   * \u5C06\u8282\u70B9\u5185\u5BB9\u8BBE\u7F6E\u4E3A\u6587\u672C\n   * @param el \n   * @param text \n   */\n  setElementText(el, text) {\n    el.textContent = text\n  },\n\n  /**\n   * \u8BBE\u7F6E\u6587\u672C\u8282\u70B9\u5185\u5BB9\n   * @param node \n   * @param text \n   */\n  setText(node, text) {\n    node.nodeValue = text\n  },\n\n  /**\n   * \u67E5\u8BE2\n   * @param selector \n   * @returns \n   */\n  querySelector(selector) {\n    return document.querySelector(selector)\n  },\n\n  /**\n   * \u83B7\u53D6\u7236\u4EB2\u8282\u70B9\n   * @param selector \n   * @returns \n   */\n  parentNode(selector) {\n    return selector.parentNode\n  },\n\n  nextSibling(selector) {\n    return selector.nextSibling\n  },\n\n  createElement(tag) {\n    return document.createElement(tag)\n  },\n\n  createText(text) {\n    return document.createTextNode(text)\n  },\n\n}", "export function patchAttr(el, key, nextValue) {\n  if (nextValue) {\n    el.setAttribute(key, nextValue)\n  } else {\n    el.removeAttribute(key)\n  }\n}", "/**\n * \n * @param el \n * @param next \n */\nexport function patchClass(el: HTMLElement, next) {\n  if (next === null) {\n    el.removeAttribute('class')\n  }\n  else {\n    el.className = next\n  }\n}", "function createInvoker(handler) {\n  const invoker = (e) => invoker.value(e);\n  invoker.value = handler;\n  return invoker\n}\n\nexport function patchEvent(el, eventName, next) {\n\n  /**\n   * \u53EF\u4EE5\u5148\u79FB\u9664\u4E8B\u4EF6\uFF0C\u518D\u91CD\u65B0\u7ED1\u5B9A\uFF0C\u4F46\u662F\u8FD9\u6837\u6BD4\u8F83\u6D6A\u8D39\u6027\u80FD\n   * \u6240\u4EE5\u5728vue\u91CC\u9762\u662F\u5982\u4E0B\u5904\u7406\u7684\n   */\n  let invokers = el._vei || (el._vei = {})\n  let exits = invokers[eventName]\n\n  if (exits && next) {\n    exits.value = next\n  } else {\n    let event = eventName.slice(2).toLowCase()\n    if (next) {\n      const invoker = invokers[eventName] = createInvoker(next)\n      el.addEventListener(event, invoker)\n    } else if (exits) { // \u5982\u679C\u6709\u8001\u503C\uFF0C\u9700\u8981\u5C06\u4E4B\u524D\u7684\u503C\u79FB\u9664\u6389\n      el.removeEventListener(event, exits)\n      invokers[eventName] = undefined\n    }\n  }\n\n}", "export function patchStyle(el, pre, next) {\n  if (pre === next) {\n    return;\n  }\n  for (const key in pre) {\n    if (!(key in next)) {\n      el.style[key] = '';\n    }\n  }\n  for (const key in next) {\n    el.style[key] = next[key];\n  }\n\n\n}", "import { patchAttr } from \"./modules/attr\"\nimport { patchClass } from \"./modules/class\"\nimport { patchEvent } from \"./modules/event\"\nimport { patchStyle } from \"./modules/style\"\n\n/**\n * \u5BF9\u4E8Edom\u5C5E\u6027\u7684\u66F4\u65B0\n * @param el \u5143\u7D20\n * @param key \u5C5E\u6027\n * @param preValue \u524D\u4E00\u4E2A\u503C \n * @param nextValue \u540E\u4E00\u4E2A\u503C\n */\nexport function patchProp(el, key, preValue, nextValue) {\n  // \u7C7B\u540D\u5904\u7406 el.className\n  if (key === 'class') {\n    patchClass(el, nextValue)\n  }\n  // \u6837\u5F0F\u5904\u7406 el.style\n  else if (key === 'style') {\n    patchStyle(el, preValue, nextValue)\n  }\n  // \u4E8B\u4EF6\u5904\u7406 addEventListener\n  else if (/^on[^a-z]/.test(key)) {\n    patchEvent(el, key, nextValue)\n  }\n  // \u666E\u901A\u5C5E\u6027 el.setAttribute\n  else {\n    patchAttr(el, key, nextValue)\n  }\n}"],
  "mappings": "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",
  "names": []
}
